# Base docker-compose configuration
# Use with docker-compose.dev.yml or docker-compose.prod.yml

services:
  router:
    image: lobby-router
    build:
      context: .
      dockerfile: Dockerfile.router
    networks:
      - lobby-network
    restart: unless-stopped

  hub:
    image: lobby-hub
    build:
      context: .
      dockerfile: Dockerfile.lobby
    networks:
      - lobby-network
    depends_on:
      - spawner
    restart: unless-stopped

  spawner:
    image: lobby-spawner
    build:
      context: .
      dockerfile: Dockerfile.spawner
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    networks:
      - lobby-network
    restart: unless-stopped

networks:
  lobby-network:
    name: lobby-network
